# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type User {
  id: String!
  email: String!
  name: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type AuthPayload {
  access_token: String!
  user: User!
}

type Task {
  id: String!
  title: String!
  description: String
  status: TaskStatus!
  priority: TaskPriority!
  dueDate: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  createdBy: String!
  assignedTo: String
  projectId: String!
  creator: User!
  assignee: User
  project: Project!
  comments: [TaskComment!]
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  REVIEW
  DONE
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

type TaskComment {
  id: String!
  content: String!
  createdAt: DateTime!
  author: User!
  task: Task!
}

type TaskEdge {
  node: Task!
  cursor: String!
}

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
}

type TaskConnection {
  edges: [TaskEdge!]!
  pageInfo: PageInfo!
  totalCount: Float!
}

type Project {
  id: String!
  name: String!
  description: String
  createdAt: DateTime!
  updatedAt: DateTime!
  members: [User!]
  tasks: [Task!]
}

type GraphQLPerformanceStats {
  totalOperations: Int!
  averageDuration: Float!
  slowQueries: Int!
  errorRate: Float!
  topSlowOperations: [SlowOperation!]!
}

type DatabasePerformanceStats {
  totalQueries: Int!
  averageDuration: Float!
  slowQueries: Int!
  errorRate: Float!
  topSlowTables: [SlowTable!]!
}

type SlowOperation {
  operation: String!
  averageDuration: Float!
  count: Int!
}

type SlowTable {
  table: String!
  averageDuration: Float!
  count: Int!
}

type PerformanceOverview {
  graphql: GraphQLPerformanceStats!
  database: DatabasePerformanceStats!
}

type SlowQuery {
  operationType: String!
  operationName: String!
  duration: Float!
  timestamp: DateTime!
  success: Boolean!
  errorMessage: String
  userId: String
}

type SlowDatabaseQuery {
  queryType: String!
  tableName: String!
  duration: Float!
  timestamp: DateTime!
  success: Boolean!
  errorMessage: String
  rowsAffected: Int
}

type SlowQueriesResponse {
  graphql: [SlowQuery!]!
  database: [SlowDatabaseQuery!]!
}

type RateLimitEndpointStats {
  endpoint: String!
  count: Int!
}

type RateLimitUserStats {
  userId: String!
  count: Int!
}

type RateLimitIPStats {
  ip: String!
  count: Int!
}

type RateLimitStats {
  timeWindow: Int!
  totalRequests: Int!
  allowedRequests: Int!
  blockedRequests: Int!
  blockRate: Float!
  topEndpoints: [RateLimitEndpointStats!]!
  topUsers: [RateLimitUserStats!]!
  topIPs: [RateLimitIPStats!]!
}

type Query {
  """Get performance statistics for GraphQL operations and database queries"""
  performanceStats(
    """Time range in minutes to analyze"""
    timeRangeMinutes: Int! = 60
  ): PerformanceOverview!

  """Get the slowest queries for analysis and optimization"""
  slowQueries(
    """Time range in minutes to analyze"""
    limitMinutes: Int! = 60

    """Maximum number of slow queries to return"""
    limit: Int! = 20
  ): SlowQueriesResponse!
  rateLimitStats(timeWindow: Float! = 3600): RateLimitStats!
  me: User
  users: [User!]!
  user(id: String!): User
  projects: [Project!]!
  project(id: String!): Project
  tasks(projectId: String!, status: String, assignedTo: String, limit: Float! = 10, offset: Float! = 0): TaskConnection!
  task(id: String!): Task
}

type Mutation {
  clearRateLimitStats: Boolean!
  register(input: RegisterInput!): AuthPayload!
  login(input: LoginInput!): AuthPayload!
  createProject(input: CreateProjectInput!): Project!
  addProjectMember(projectId: String!, userId: String!): Project!
  createTask(input: CreateTaskInput!): Task!
  updateTask(id: String!, input: UpdateTaskInput!): Task!
  deleteTask(id: String!): Boolean!
  assignTask(taskId: String!, userId: String!): Task!
  addComment(taskId: String!, content: String!): TaskComment!
}

input RegisterInput {
  email: String!
  password: String!
  name: String!
}

input LoginInput {
  email: String!
  password: String!
}

input CreateProjectInput {
  name: String!
  description: String
}

input CreateTaskInput {
  title: String!
  description: String
  status: TaskStatus! = TODO
  priority: TaskPriority! = MEDIUM
  dueDate: DateTime
  projectId: String!
  assignedTo: String
}

input UpdateTaskInput {
  title: String
  description: String
  status: TaskStatus
  priority: TaskPriority
  dueDate: DateTime
  assignedTo: String
}

type Subscription {
  taskCreated(projectId: String!): Task!
  taskUpdated(projectId: String!): Task!
  taskDeleted(projectId: String!): String!
  commentAdded(taskId: String!): TaskComment!
}